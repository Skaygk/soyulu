<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Subir Carpeta</title>

<style>
body {
  font-family: Arial;
  background: #000;
  color: #b84cff;
  text-align: center;
  padding: 20px;
}

input, textarea {
  width: 300px;
  padding: 10px;
  margin: 5px;
  background: #000;
  border: 2px solid #b84cff;
  color: #b84cff;
}

textarea {
  height: 150px;
  padding-top: 5px; 
  resize: vertical; 
}

button {
  padding: 10px 20px;
  background: #b84cff;
  border: none;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>Subir carpeta</h1>

<input id="titulo" placeholder="Titulo"><br>
<input id="autor" placeholder="Autor"><br>
<textarea id="contenido" placeholder="Contenido"></textarea><br>
<input id="usuario" placeholder="Usuario"><br>
<input type="password" id="contrasena" placeholder="ContraseÃ±a"><br>
<button onclick="enviar()">Subir</button>

<script>
async function enviar() {
  const datos = {
    titulo: titulo.value.trim(),
    autor: autor.value.trim(),
    contenido: contenido.value.trim(),
    usuario: usuario.value.trim(),
    contrasena: contrasena.value.trim()
  };

  if (Object.values(datos).some(v => !v)) {
    alert('Todos los campos son obligatorios');
    return;
  }

  try {
    const res = await fetch('/api/agregarCarpeta', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(datos)
    });

    const r = await res.json();
    alert(r.ok ? 'doxx subido correctamente' : r.error);
    
    if(r.ok){
      titulo.value = '';
      autor.value = '';
      contenido.value = '';
      usuario.value = '';
      contrasena.value = '';
    }

  } catch(err){
    console.error(err);
    alert('Error al subir carpeta');
  }
}
</script>

</body>
</html>
